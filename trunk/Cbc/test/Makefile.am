# Copyright (C) 2006 International Business Machines and others.
# All Rights Reserved.
# This file is distributed under the Common Public License.

## $Id$

# Author:  Andreas Waechter           IBM    2006-04-13

AUTOMAKE_OPTIONS = foreign

########################################################################
#                         unitTest for Cbc                             #
########################################################################

CBC_TEST_TGTS =

if COIN_HAS_CLP
  CBC_TEST_TGTS += test_cbc
endif
if CBC_BUILD_CBC_GENERIC
  CBC_TEST_TGTS += test_cbc_generic
endif

# We are using the solver executables to do the unit test

test: $(CBC_TEST_TGTS)

test_cbc: ../src/cbc$(EXEEXT)
	if test x"$(DIRMIPLIB)" != x; then \
		MIPLIBARG="-dirMiplib $(DIRMIPLIB) -miplib"; \
	fi; \
	if test x"$(DIRSAMPLE)" != x; then \
		SAMPLEARG="-dirSample $(DIRSAMPLE)"; \
	fi; \
	../src/cbc$(EXEEXT) $$SAMPLEARG -unitTest $$MIPLIBARG

test_cbc_generic: ../src/cbc-generic$(EXEEXT)
	echo "A minimal test is all that cbc-generic can manage just yet."
	../src/cbc-generic$(EXEEXT) \
	    -directory ../../Data/Sample -import p0033 -branch

.PHONY: test

########################################################################
#                          Cleaning stuff                              #
########################################################################

# Here we list everything that is not generated by the compiler, e.g.,
# output files of a program

DISTCLEANFILES = yy.mps xx.mps
